# 项目文档导航（Index）

> 本文档是本项目文档系统的**入口页**，面向人类开发者与 LLM。阅读完本页后，你应当知道：
> - 有哪些**文档类型**，各自用途是什么；
> - 面对不同的**任务/问题**，应该优先阅读哪一类文档；
> - 如何通过**主题关键词**快速找到对应文档；
> - 从哪些**核心入口文档**开始阅读本项目。

---

## 1. 文档总览与分类（Documentation Overview & Categories）

本项目的文档系统分为几类核心文档类型，它们在用途与典型内容上有所区别，但**默认所有文档同时服务于人类开发者与 LLM**，不会再单独区分「给 AI 的文档」与「给人看的文档」。

### 1.1 技术说明文档（按主题/模块命名）

- **命名方式**：以主题或模块名直接命名，例如：
  - `general_intro.md`：项目整体架构与设计原则总览；
  - `intro/aimassistant_intro.md`：自瞄系统整体设计说明；
  - 其他：`vision_intro.md`、`chassis_intro.md`、`gimbal_intro.md` 等。
- **目标读者**：
  - 需要理解整体设计与接口约定的人类开发者；
  - 需要为你生成更详细文档的 LLM。 
- **主要内容**：
  - 某一功能域或模块的**架构说明**与**设计动机**；
  - 关键数据流、控制流的高层描述；
  - 对后续按需文档生成非常重要的「基础事实」。

> 约定：当你让 LLM 生成任意模块/功能的文档时，LLM 应优先查找与该模块对应的技术说明文档（通常为 `xxx_intro.md` 或其他以模块名命名的说明文档），用作技术和设计层面的权威参考。

### 1.2 设计历程与演进文档：`*_journey.md`

- **命名规则**：`[模块名或主题名]_journey.md`
- **目标读者**：
  - 需要理解「为什么是现在这个方案」的开发者；
  - 需要为新一轮重构或优化做背景调研的 LLM。 
- **主要内容**：
  - 某个模块或功能的**演进过程**：从最初方案到当前实现；
  - 遇到过的主要问题与坑点；
  - 做过的性能优化，关键指标前后对比；
  - 重要的**设计/架构决策过程与方案对比**（包括原本打算放到单独决策文档里的内容）；
  - 尚未解决的技术债与 TODO。
- **典型用途**：
  - 为「架构复盘文档」「重构设计文档」「决策回顾」提供源材料；
  - 帮助 LLM 在生成新文档时避免重复之前走过的弯路。

### 1.4 用户/操作手册类文档

- **命名方式**：按主题命名，例如：
  - `guide/repl.md`：交互式调试工具使用说明；
  - `status.md`：当前项目运行/测试状态说明；
  - 未来可能新增的 `troubleshooting.md` 等。
- **目标读者**：
  - 所有需要「如何使用 / 如何操作 / 如何排错」信息的读者，包括：
    - 一线操作人员（例如赛场操作员）；
    - 开发者（需要了解工具和流程以便调试与扩展）；
    - LLM（需要基于这些手册为人类总结或生成更高层次文档）。
- **主要内容**：
  - 安装步骤与环境要求（如有单独文档，也可以只给链接）；
  - 常用命令 / 快捷键 / 操作流程；
  - 常见错误提示与解决方法（可以引用 `*_journey.md` 中的坑点）。

---

## 2. 典型任务 → 文档类型映射（Task → Doc Type Mapping）

本节帮助你在「有一个具体需求/问题」时，快速判断应该从哪类文档入手。

> 约定：当你通过 LLM 生成文档时，也可以直接把下表中的任务描述当作提示的一部分，帮助 LLM 选择合适的上下文与输出风格。

### 2.1 面向架构与整体理解的任务

- **任务示例**：
  - 「想快速了解整个项目在做什么？」
  - 「需要一份整体架构 / 模块分层说明。」
- **优先阅读文档类型**：
  1. 项目总览类技术说明文档（例如：`general_intro.md`）；
  2. 各子系统的技术说明文档（例如：自瞄、视觉、底盘等的 `xxx_intro.md`）。
- **LLM 生成文档时的推荐做法**：
  - 先读取 / 总结对应的技术说明文档；
  - 再按「概览 → 模块划分 → 数据流 / 控制流 → 常见坑」结构输出。

### 2.2 面向具体模块的深入理解任务

- **任务示例**：
  - 「想为 `aimassistant/pipeline.py` 写一份模块级开发文档。」
  - 「需要解释某模块的关键算法与接口约定。」
- **优先阅读文档类型**：
  1. 对应模块主题的技术说明文档（例如：`aimassistant_intro.md`）；
  2. 若涉及历史变更 / 性能优化，则追加阅读对应 `*_journey.md`。
- **LLM 生成文档时的推荐做法**：
  - 以技术说明文档中的职责与数据流为“事实来源”；
  - 补充 `*_journey.md` 中的设计演进与坑点；
  - 最终输出包括：模块职责、关键 API、与其他模块的交互关系、已知限制与注意事项。

### 2.3 面向重构、性能优化与问题排查的任务

- **任务示例**：
  - 「分析某模块的历史优化过程，写一份性能调优小结。」
  - 「梳理某次 bug 的来龙去脉，写故障分析报告。」
- **优先阅读文档类型**：
  1. 对应模块的 `*_journey.md`。
- **LLM 生成文档时的推荐做法**：
  - 以 `*_journey.md` 为主线，梳理时间轴和关键决策点；
  - 若有多个竞争方案，则在 journey 文档中查找并整合方案对比信息（如尚未记录，应在补充 journey 时一并写入）；
  - 输出时突出「问题 → 分析 → 方案 → 结果 → 经验教训」。

### 2.4 面向最终用户 / 操作员的任务

- **任务示例**：
  - 「写一份快速上手指南。」
  - 「整理一份竞赛现场常用操作手册。」
- **优先阅读文档类型**：
  1. 当前已有的操作 / 使用类文档（如 `repl.md`、`status.md` 等）；
  2. 必要时，从相关技术说明文档中抽取对用户有帮助但不过度技术化的信息。
- **LLM 生成文档时的推荐做法**：
  - 以「步骤式说明 + 命令 / 操作示例」为主；
  - 技术细节保持在「能帮助排错」但不过度灌注内部实现的水平。

---

## 3. 主题关键词 → 文档命名 / 匹配规则（简要说明）

当你只记得一个「功能域 / 主题关键词」，但不知道该看哪份具体文档时，可以遵循本节的命名与匹配规则来定位文档。

> 注意：本节只提供**简化版规则**，便于人工与 LLM 快速理解；完整的文档匹配算法可在需要时单独扩展为更详细的说明文档。

### 3.1 基本命名约定

- **功能域 / 模块名**：
  - 例如：`aim`（自瞄）、`chassis`（底盘）、`recognizer`（视觉识别）、`gimbal`（云台）等。
- **对应文档命名模式**：
  - 技术说明：通常为 `[keyword]_intro.md` 或其他以模块名直观命名的说明文档；
  - 演进历程：`[keyword]_journey.md`。

### 3.2 简化匹配流程

给定一个用户关心的主题关键词 `K`（例如 “自瞄” / “aim”）：

1. **提取关键词**：
   - 将中文关键词映射为英文短语（如「自瞄」→ `aim` 或 `aimassistant`）。
2. **优先查找技术说明文档**：
   - 在文档目录下查找与 `K` 匹配的 `*[K]*_intro.md` 或其他以关键词命名的说明文档；
   - 如存在，则视为该主题的首选技术说明文档。
3. **如涉及历史 / 优化 / 坑点，则继续查找演进文档**：
   - 查找 `*[K]*_journey.md`，包括可能的归档目录；
   - 该类文档通常包含更多过程细节和经验总结。
4. **若没有任何匹配文档**：
   - 回退到更通用的文档，例如 `general_intro.md`；
   - 或者直接读取相关源码，由 LLM 在生成文档时补齐说明。

### 3.3 LLM 使用建议

- 当你在提示 LLM 生成某个主题的文档时，可以显式给出关键词：
  - 例如：「主题：自瞄（关键词：`aimassistant`）；请先根据文档命名规则查找相关 `*_intro.md` 与 `*_journey.md`。」
- LLM 在没有找到对应文档时，应优先告知「该主题尚无专门文档」，并：
  - 说明将直接基于源码与已有通用文档推断；
  - 提议在本次对话结束时，顺带生成一份对应的 `*_intro.md` 或 `*_journey.md` 草稿。

---

## 4. 核心入口文档列表（Key Entry Documents）

本节列出当前（或计划中）的若干「核心入口文档」。它们可以被视为使用本项目文档系统的推荐起点。

> 说明：其中部分文档可能尚未完全实现，但仍会提前在此列出，以帮助规划整体文档结构。未来可以在实现后逐步补齐内容。

### 4.1 项目与架构类入口

- `general_intro.md`（计划 / 建议）
  - 内容：项目整体目标、硬件平台、软件架构分层、关键模块概览；
  - 用途：作为所有深入阅读前的起点，让读者在 5–10 分钟内形成完整 mental model。 
- `status.md`（已存在于 `docs/`）
  - 内容：当前开发进度、已完成功能、待办事项、已知问题；
  - 用途：了解「现在能用什么」「哪些还在开发中」。

### 4.2 规范与约定类入口

- `coding_style_guide.md`（计划 / 建议）
  - 内容：本项目的命名规范、类型标注要求、注释风格、硬件控制参数校验规则等；
  - 用途：为所有代码示例、接口说明与技术文档提供统一风格约束。 
- `copilot-instructions.md`（位于 `.github/`，主要面向 LLM）
  - 内容：对 LLM 的角色设定、行为约束、文档同步机制等；
  - 用途：为「按需文档生成」和「代码辅助开发」提供统一的行为说明。

### 4.3 功能 / 子系统类入口

> 约定：所有模块级介绍文档统一放在 `docs/intro/` 目录下，
> 命名形式通常为 `<module>_intro.md`，是进入某个功能域的首选入口。

- `intro/aimassistant_intro.md`（已存在）
  - 内容：自瞄系统的整体架构、内部子模块（`angle` / `selector` / `pipeline`）、数据流（从视觉识别到云台控制）、关键参数与性能假设；
  - 用途：一切与「自瞄」相关的说明书、调参指南、性能分析或故障排查文档，在生成或编写前都应首先参考此文。 
- `intro/vision_intro.md`（已存在）
  - 内容：视觉识别模块 `Recognizer` 的整体结构，包括模型加载、推理线程、帧缓存与状态查询接口，以及与性能相关的基本假设；
  - 用途：当你需要理解视觉链路、替换/调整模型、评估 FPS / 延迟，或为视觉部分编写文档时，从这里开始。 
- `intro/skill_intro.md`（已存在）
  - 内容：技能系统的抽象与管理方式，包括 `BaseSkill`、`SkillManager`、自瞄技能等典型实现，以及技能如何与 HAL 层交互；
  - 用途：当你需要新增/修改技能、理解键盘/指令如何映射到底盘/云台/自瞄行为时，优先阅读此文。 
- `intro/bot_intro.md`（已存在）
  - 内容：机器人硬件抽象层 `src/bot/` 的整体设计，涵盖串口连接、SDK 模式切换、底盘/云台/发射器控制接口，以及与 RoboMaster SDK 协议的关系；
  - 用途：当你需要理解「从高层逻辑到实际 RoboMaster 指令」的落地路径，或排查 UART / 协议相关问题时，从这里开始。 

> 未来新增其他模块级 intro（例如单独拆分底盘、云台的更细粒度说明）时，
> 应该同样放在 `docs/intro/` 目录下，并在本小节同步增加对应条目与一句话摘要。

### 4.4 历史与演进入口（Journey）

> 说明：本小节列出若干已经存在或计划中的 `*_journey.md` 文档，
> 它们按「特性 / 模块」组织历史，而不是按“性能”等横切主题。

- `journey/v1_0_history.md`（已存在）
  - 内容：v1.0 版本从无到有的整体开发历程，覆盖通信、技能、视觉、REPL 等核心模块；
  - 用途：需要快速了解 v1.0 阶段重大决策与典型坑点时，从这里开始。 
- `journey/aimassistant_journey.md`（已存在）
  - 内容：自瞄系统从「先能打」到「打得更可靠/更稳」的演进过程，包括 selector / angle / pipeline、
    与视觉 / 串口 / 云台的协作关系，以及与自瞄性能相关的故事；
  - 用途：任何与自瞄策略、自瞄性能、自瞄故障排查有关的问题，优先参考此文。 
- `journey/uart_communication_journey.md`（已存在 / skeleton）
  - 内容：串口通信与 SDK 协议对接的演进历史，包括收发线程设计、命令队列、
    超时与“假死”问题、指令拆半等典型坑点，目前以骨架形式存在，后续按实际历史逐步补充；
  - 用途：分析通信层 bug、设计新协议封装或评估串口性能影响时的首选参考。 
- `journey/vision_recognition_journey.md`（已存在 / skeleton）
  - 内容：视觉识别模块在模型格式选择、预处理策略、FPS / 延迟优化等方面的演进，目前以骨架形式存在；
  - 用途：需要了解视觉链路性能演进或做新一轮模型/预处理调整时，可从这里切入。 
 - `journey/gimbal_control_journey.md`（已存在 / skeleton）
  - 内容：云台 pitch/yaw 控制、角度归一化以及 360° 旋转能力的设计与演进，目前仅建立骨架以记录未来经验；
  - 用途：理解云台控制策略、分析云台相关 bug 或评估控制改动风险时的首选参考。 
 - `journey/skill_system_journey.md`（已存在 / skeleton）
  - 内容：技能系统（`Skill` / `SkillManager`）设计与迭代过程，包括技能抽象、调度策略与与其他模块的协作关系，目前为骨架版本；
  - 用途：在扩展或重构技能系统之前，了解历史设计思路与潜在坑点。 

> 注意：随着项目演进，会逐步为各主要特性 / 模块补齐对应的 journey 文档，
> 本小节也应在文档新增或合并时同步更新。

### 4.5 工具与操作类入口

- `guide/repl.md`
  - 内容：UART 异步 REPL 串口调试工具的使用方式、典型调试流程、安全注意事项；
  - 用途：在树莓派 Linux 运行环境中进行串口通信、RoboMaster SDK 指令测试和硬件联调的首选入口，通常与 `docs/intro/bot_intro.md`、`docs/reference/sdk_protocol_api_document.md` 配合使用。 
- 未来可添加的入口文档：
  - `troubleshooting.md`：常见问题与排查步骤。

### 4.6 Reference 文档入口

- `reference/sdk_protocol_api_document.md`
  - 内容：RoboMaster SDK 协议与指令速查，包括常用命令格式、参数说明等；
  - 用途：与 `src/bot/` 模块、`docs/intro/bot_intro.md` 和 `docs/guide/repl.md` 配合，在树莓派 Linux 实际控制环境下编写/调试底层控制指令时快速确认协议细节。 

> 后续如有新的 reference 文档（例如编码规范、硬件接线说明等），
> 也应在本小节中加入简要描述与链接。

---

> 下一步建议：
> - 当你开始为某一子系统（例如自瞄、底盘）编写第一份 `xxx_intro.md` 文档时，可以在本 `index.md` 中补充对应的链接与一句话摘要；
> - 随着 `*_journey.md` 的逐步增加，可以再为「历史与归档」单独增加一个章节，列出重要的设计演进文档，形成更完整的导航体系。